(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();function p(){}function S(e){return e()}function A(){return Object.create(null)}function k(e){e.forEach(S)}function z(e){return typeof e=="function"}function H(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function V(e){return Object.keys(e).length===0}function K(e,t,n){e.insertBefore(t,n||null)}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function W(e){return document.createTextNode(e)}function Q(e){return Array.from(e.childNodes)}let I;function _(e){I=e}const w=[],N=[],P=[],L=[],X=Promise.resolve();let C=!1;function Y(){C||(C=!0,X.then(F))}function T(e){P.push(e)}const j=new Set;let $=0;function F(){const e=I;do{for(;$<w.length;){const t=w[$];$++,_(t),Z(t.$$)}for(_(null),w.length=0,$=0;N.length;)N.pop()();for(let t=0;t<P.length;t+=1){const n=P[t];j.has(n)||(j.add(n),n())}P.length=0}while(w.length);for(;L.length;)L.pop()();C=!1,j.clear(),_(e)}function Z(e){if(e.fragment!==null){e.update(),k(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const ee=new Set;function te(e,t){e&&e.i&&(ee.delete(e),e.i(t))}function ne(e,t,n,r){const{fragment:i,after_update:c}=e.$$;i&&i.m(t,n),r||T(()=>{const s=e.$$.on_mount.map(S).filter(z);e.$$.on_destroy?e.$$.on_destroy.push(...s):k(s),e.$$.on_mount=[]}),c.forEach(T)}function re(e,t){const n=e.$$;n.fragment!==null&&(k(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ie(e,t){e.$$.dirty[0]===-1&&(w.push(e),Y(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,n,r,i,c,s,l=[-1]){const u=I;_(e);const o=e.$$={fragment:null,ctx:[],props:c,update:p,not_equal:i,bound:A(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:A(),dirty:l,skip_bound:!1,root:t.target||u.$$.root};s&&s(o.root);let a=!1;if(o.ctx=n?n(e,t.props||{},(d,f,...m)=>{const h=m.length?m[0]:f;return o.ctx&&i(o.ctx[d],o.ctx[d]=h)&&(!o.skip_bound&&o.bound[d]&&o.bound[d](h),a&&ie(e,d)),f}):[],o.update(),a=!0,k(o.before_update),o.fragment=r?r(o.ctx):!1,t.target){if(t.hydrate){const d=Q(t.target);o.fragment&&o.fragment.l(d),d.forEach(R)}else o.fragment&&o.fragment.c();t.intro&&te(e.$$.fragment),ne(e,t.target,t.anchor,t.customElement),F()}_(u)}class ue{$destroy(){re(this,1),this.$destroy=p}$on(t,n){if(!z(n))return p;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!V(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ce(e){return e}function se(e){return e.length===0?ce:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}function v(e){const t={subscribe(n){let r=null,i=!1,c=!1,s=!1;function l(){if(r===null){s=!0;return}c||(c=!0,typeof r=="function"?r():r&&r.unsubscribe())}return r=e({next(u){var o;i||(o=n.next)==null||o.call(n,u)},error(u){var o;i||(i=!0,(o=n.error)==null||o.call(n,u),l())},complete(){var u;i||(i=!0,(u=n.complete)==null||u.call(n),l())}}),s&&l(),{unsubscribe:l}},pipe(...n){return se(n)(t)}};return t}function le(e){return t=>{let n=0,r=null;const i=[];function c(){r||(r=t.subscribe({next(l){var u;for(const o of i)(u=o.next)==null||u.call(o,l)},error(l){var u;for(const o of i)(u=o.error)==null||u.call(o,l)},complete(){var l;for(const u of i)(l=u.complete)==null||l.call(u)}}))}function s(){if(n===0&&r){const l=r;r=null,l.unsubscribe()}}return{subscribe(l){return n++,i.push(l),c(),{unsubscribe(){n--,s();const u=i.findIndex(o=>o===l);u>-1&&i.splice(u,1)}}}}}}class O extends Error{constructor(t){super(t),this.name="ObservableAbortError",Object.setPrototypeOf(this,O.prototype)}}function ae(e){let t;return{promise:new Promise((r,i)=>{let c=!1;function s(){c||(c=!0,i(new O("This operation was aborted.")),l.unsubscribe())}const l=e.subscribe({next(u){c=!0,r(u),s()},error(u){c=!0,i(u),s()},complete(){c=!0,s()}});t=s}),abort:t}}class g extends Error{static from(t,n={}){var r;return t instanceof Error?t.name==="TRPCClientError"?t:new g(t.message,{...n,cause:t,result:null}):new g((r=t.error.message)!=null?r:"",{...n,cause:void 0,result:t})}constructor(t,n){var i,c;const r=n==null?void 0:n.cause;super(t,{cause:r}),this.meta=n==null?void 0:n.meta,this.cause=r,this.shape=(i=n==null?void 0:n.result)==null?void 0:i.error,this.data=(c=n==null?void 0:n.result)==null?void 0:c.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,g.prototype)}}function fe(e,t){if("error"in e){const r=t.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:r}}}return{ok:!0,result:{...e.result,...(!e.result.type||e.result.type==="data")&&{type:"data",data:t.transformer.deserialize(e.result.data)}}}}function de(e){return v(t=>{function n(i=0,c=e.op){const s=e.links[i];if(!s)throw new Error("No more links to execute - did you forget to add an ending link?");return s({op:c,next(u){return n(i+1,u)}})}return n().subscribe(t)})}function D(){return typeof window<"u"?window:globalThis}function me(e){var t;return(t=e!=null?e:D().AbortController)!=null?t:null}function he(e){if(e)return e;const t=D(),n=t.fetch;if(n)return typeof n.bind=="function"?n.bind(t):n;throw new Error("No fetch implementation found")}function ye(e){const t=e.headers||(()=>({}));return{url:e.url,fetch:he(e.fetch),AbortController:me(e.AbortController),headers:typeof t=="function"?t:()=>t}}function be(e){const t={};for(let n=0;n<e.length;n++){const r=e[n];t[n]=r}return t}const ge={query:"GET",mutation:"POST"};function U(e){return"input"in e?e.runtime.transformer.serialize(e.input):be(e.inputs.map(t=>e.runtime.transformer.serialize(t)))}function B(e){let t=e.url+"/"+e.path;const n=[];if("inputs"in e&&n.push("batch=1"),e.type==="query"){const r=U(e);r!==void 0&&n.push(`input=${encodeURIComponent(JSON.stringify(r))}`)}return n.length&&(t+="?"+n.join("&")),t}function pe(e){if(e.type==="query")return;const t=U(e);return t!==void 0?JSON.stringify(t):void 0}function xe(e){const{type:t}=e,n=e.AbortController?new e.AbortController:null;return{promise:new Promise((c,s)=>{const l=B(e),u=pe(e),o={};Promise.resolve(e.headers()).then(a=>{if(t==="subscription")throw new Error("Subscriptions should use wsLink");return e.fetch(l,{method:ge[t],signal:n==null?void 0:n.signal,body:u,headers:{"content-type":"application/json",...a}})}).then(a=>(o.response=a,a.json())).then(a=>{c({json:a,meta:o})}).catch(s)}),cancel:()=>{n==null||n.abort()}}}const E=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function q(e){let t=null,n=null;const r=()=>{clearTimeout(n),n=null,t=null};function i(l){const u=[[]];let o=0;for(;;){const a=l[o];if(!a)break;const d=u[u.length-1];if(a.aborted){a.reject(new Error("Aborted")),o++;continue}if(e.validate(d.concat(a).map(m=>m.key))){d.push(a),o++;continue}if(d.length===0){a.reject(new Error("Input is too big for a single dispatch")),o++;continue}u.push([])}return u}function c(){const l=i(t);r();for(const u of l){if(!u.length)continue;const o={items:u,cancel:E};for(const f of u)f.batch=o;const{promise:a,cancel:d}=e.fetch(o.items.map(f=>f.key));o.cancel=d,a.then(f=>{for(let m=0;m<f.length;m++){const h=f[m],y=o.items[m];y.resolve(h),y.batch=null}}).catch(f=>{for(const m of o.items)m.reject(f),m.batch=null})}}function s(l){const u={aborted:!1,key:l,batch:null,resolve:E,reject:E},o=new Promise((d,f)=>{u.reject=f,u.resolve=d,t||(t=[]),t.push(u)});return n||(n=setTimeout(c)),{promise:o,cancel:()=>{var d;u.aborted=!0,(d=u.batch)!=null&&d.items.every(f=>f.aborted)&&(u.batch.cancel(),u.batch=null)}}}return{load:s}}function we(e){const t=ye(e);return n=>{const r=e.maxURLLength||1/0,i=o=>({validate:f=>{if(r===1/0)return!0;const m=f.map(x=>x.path).join(","),h=f.map(x=>x.input);return B({...t,runtime:n,type:o,path:m,inputs:h}).length<=r},fetch:f=>{const m=f.map(b=>b.path).join(","),h=f.map(b=>b.input),{promise:y,cancel:x}=xe({...t,runtime:n,type:o,path:m,inputs:h});return{promise:y.then(b=>(Array.isArray(b.json)?b.json:f.map(()=>b.json)).map(G=>({meta:b.meta,json:G}))),cancel:x}}}),c=q(i("query")),s=q(i("mutation")),l=q(i("subscription")),u={query:c,subscription:l,mutation:s};return({op:o})=>v(a=>{const d=u[o.type],{promise:f,cancel:m}=d.load(o);return f.then(h=>{const y=fe(h.json,n);if(!y.ok){a.error(g.from(y.error,{meta:h.meta}));return}a.next({context:h.meta,result:y.result}),a.complete()}).catch(h=>a.error(g.from(h))),()=>{m()}})}}const J=()=>{};function M(e,t){return new Proxy(J,{get(r,i){if(!(typeof i!="string"||i==="then"))return M(e,[...t,i])},apply(r,i,c){return e({args:c,path:t})}})}const _e=e=>M(e,[]),$e=e=>new Proxy(J,{get(t,n){if(!(typeof n!="string"||n==="then"))return e(n)}});class Pe{$request({type:t,input:n,path:r,context:i={}}){return de({links:this.links,op:{id:++this.requestId,type:t,path:r,input:n,context:i}}).pipe(le())}requestAsPromise(t){const n=this.$request(t),{promise:r,abort:i}=ae(n);return new Promise((s,l)=>{var u;(u=t.signal)==null||u.addEventListener("abort",i),r.then(o=>{s(o.result.data)}).catch(o=>{l(g.from(o))})})}query(t,n,r){return this.requestAsPromise({type:"query",path:t,input:n,context:r==null?void 0:r.context,signal:r==null?void 0:r.signal})}mutation(t,n,r){return this.requestAsPromise({type:"mutation",path:t,input:n,context:r==null?void 0:r.context,signal:r==null?void 0:r.signal})}subscription(t,n,r){return this.$request({type:"subscription",path:t,input:n,context:r==null?void 0:r.context}).subscribe({next(c){var s,l,u;c.result.type==="started"?(s=r.onStarted)==null||s.call(r):c.result.type==="stopped"?(l=r.onStopped)==null||l.call(r):(u=r.onData)==null||u.call(r,c.result.data)},error(c){var s;(s=r.onError)==null||s.call(r,c)},complete(){var c;(c=r.onComplete)==null||c.call(r)}})}constructor(t){this.requestId=0;function n(){return t.transformer?"input"in t.transformer?{serialize:t.transformer.input.serialize,deserialize:t.transformer.output.deserialize}:t.transformer:{serialize:r=>r,deserialize:r=>r}}this.runtime={transformer:n()},this.links=t.links.map(r=>r(this.runtime))}}const ke={query:"query",mutate:"mutation",subscribe:"subscription"};function je(e){return $e(t=>t in e?e[t]:_e(({path:n,args:r})=>{const i=[t,...n],c=i.pop(),s=ke[c],l=i.join(".");return e[s](l,...r)}))}function Ee(e){const t=new Pe(e);return je(t)}const qe=Ee({links:[we({url:`${location.origin}/api`})]});function Ce(e){let t;return{c(){t=W("Fleetkit.")},m(n,r){K(n,t,r)},p,i:p,o:p,d(n){n&&R(t)}}}Te();async function Te(){const e=await qe.createUser.mutate({email:"email@test.com",password:"password"});console.log(e)}class Ie extends ue{constructor(t){super(),oe(this,t,null,Ce,H,{})}}new Ie({target:document.getElementById("app")});
